import os
import numpy as np
from PIL import Image

# Set the directory containing the binary files
directory = 'ml-sample-data/ml-sample-pack-small/benign/arm'
save_directory = 'grayscale_image_sample_data/benign/arm'

# Loop through each file in the directory
for filename in os.listdir(directory):
    with open(os.path.join(directory, filename), 'rb') as f:
        binary_data = f.read()

    # Convert the binary data to a NumPy array of pixel values
    pixel_data = np.frombuffer(binary_data, dtype=np.uint8)

    # Convert the pixel array to a grayscale image
    image = Image.fromarray(pixel_data, mode='L')

    # Save the image as a PNG file with the same name as the binary file
    image.save(os.path.join(save_directory, filename + '.png'))
