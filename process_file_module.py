import os
import os
import io

import numpy as np
from PIL import Image, ImageOps


def read_binary_file(file_path):
    with open(file_path, 'rb') as f:
        binary_data = f.read()
    return binary_data


def binary_to_image(binary_data, output_dir):
    image = Image.frombytes('L', (1, len(binary_data)), binary_data)
    image_size = 90
    image = image.resize((image_size, image_size))
    image.save(os.path.join(os.path.basename(output_dir), 'png'))
    return image


def process_file(input_file_path, output_dir):
    binary_data = read_binary_file(input_file_path)
    img = binary_to_image(binary_data, output_dir)
    return img
